<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="SV_SearchImprovements" title="Enhanced Search Improvements" version_string="1.0.0" version_id="1000001" url="https://xenforo.com/community/resources/enhanced-search-improvements.4762/" install_callback_class="SV_SearchImprovements_Installer" install_callback_method="install" uninstall_callback_class="SV_SearchImprovements_Installer" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates>
    <template title="sv_search_weighting"><![CDATA[<xen:controlunit label="{$preparedOption.title}">
<ul class="FieldChoices">
<xen:foreach loop="$preparedOption.option_value" key="$choice" value="$value">
<li>
{$extra.handlers.{$choice}}:
<xen:spinbox label="" name="{$fieldPrefix}[{$preparedOption.option_id}][{$choice}]" value="{$value}" />
</li>
</xen:foreach>
<li>
<xen:select label="" name="{$fieldPrefix}[{$preparedOption.option_id}][]" value=""
hint="{$preparedOption.hint}" inputclass="{$preparedOption.inputClass}">
    <xen:options source="$formatParams" />
</xen:select>
<xen:spinbox label="" name="{$fieldPrefix}[{$preparedOption.option_id}][]" value="1" />
</li>
</ul>
<input type="button" value="{xen:phrase add_additional_choice}" class="button smallButton FieldAdder" data-source="ul.FieldChoices li" />

<p class="explain">{xen:raw $preparedOption.explain}</p>
{xen:raw $editLink}
</xen:controlunit>]]></template>
  </admin_templates>
  <admin_template_modifications/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="load_class" execute_order="11" callback_class="SV_SearchImprovements_Listener" callback_method="load_class" active="1" hint="XenES_Search_SourceHandler_ElasticSearch" description="XenES_Search_SourceHandler_ElasticSearch"/>
    <listener event_id="load_class" execute_order="11" callback_class="SV_SearchImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Account" description="XenForo_ControllerPublic_Account"/>
    <listener event_id="load_class" execute_order="11" callback_class="SV_SearchImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_User" description="XenForo_DataWriter_User"/>
    <listener event_id="load_class_controller" execute_order="11" callback_class="SV_SearchImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Search" description="XenForo_ControllerPublic_Search"/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups>
    <option option_id="content_type_weighting" edit_format="callback" data_type="array" can_backup="1" validation_class="SV_SearchImprovements_Option_ContentTypes" validation_method="verifyOption">
      <default_value>a:{}</default_value>
      <edit_format_params>SV_SearchImprovements_Option_ContentTypes::renderOption</edit_format_params>
      <sub_options>*</sub_options>
      <relation group_id="searchOptions" display_order="9120"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="general" permission_id="sv_searchOptions" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="95"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="default_search_options_explain" version_id="1000001" version_string="1.0.0"><![CDATA[The search order to use for quick searches, searching by thread, and the default value when loading the search form.]]></phrase>
    <phrase title="default_search_order" version_id="1000001" version_string="1.0.0"><![CDATA[Default Search Order]]></phrase>
    <phrase title="option_content_type_weighting" version_id="1000001" version_string="1.0.0 Alpha2"><![CDATA[Content Type Weighting]]></phrase>
    <phrase title="option_content_type_weighting_explain" version_id="1000001" version_string="1.0.0 Alpha2"><![CDATA[Per content type search weighting.<br/>Value of '1' removes the weighting option.<br/>Value of 0 will prevent the content type from being searchable with multiple content types.]]></phrase>
    <phrase title="permission_general_sv_searchOptions" version_id="1000001" version_string="1.0.0"><![CDATA[Search Options]]></phrase>
    <phrase title="sv_search_options" version_id="1000001" version_string="1.0.0"><![CDATA[Search Options]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties/>
  <templates>
    <template title="sv_search_preferences" version_id="1000001" version_string="1.0.0"><![CDATA[<xen:if is="{$visitor.permissions.general.sv_searchOptions}">
<h3 class="sectionHeader">{xen:phrase sv_search_options}</h3>
<dl class="ctrlUnit">
    <dt></dt>
    <dd>
        <ul>
            <li><label for="ctrl_order_default"><input type="radio" name="sv_default_search_order" id="ctrl_order_default" value="" {xen:checked '{$visitor.sv_default_search_order} == ""'} /> {xen:phrase default_search_order}</label></li>
            <li><label for="ctrl_order_date"><input type="radio" name="sv_default_search_order" id="ctrl_order_date" value="date" {xen:checked '{$visitor.sv_default_search_order} == "date"'} /> {xen:phrase most_recent}</label></li>
            <li><label for="ctrl_order_relevance"><input type="radio" name="sv_default_search_order" id="ctrl_order_relevance" value="relevance" {xen:checked '{$visitor.sv_default_search_order} == "relevance"'} /> {xen:phrase relevance}</label></li>
        </ul>
        <p class="explain">{xen:phrase default_search_options_explain}</p>
    </dd>
</dl>
</xen:if>]]></template>
  </templates>
  <public_template_modifications>
    <modification template="account_preferences" modification_key="SV_SearchImprovements_account_preferences_1" description="Search Preferences" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:if is="{$xenOptions.enableNotices]]></find>
      <replace><![CDATA[<xen:include template="sv_search_preferences" />
$0]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
